<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
  
  <mapper namespace="Member">
	<resultMap id="memberResultSet" type="Member">
	
		<id property="mNo" column="USER_NO"/>
		<result property="mId" column="USER_ID"/>
		<result property="mPwd" column="USER_PWD"/>
		<result property="mBirth" column="BIRTHDAY"/>
		<result property="mName" column="USER_NAME"/>
		<result property="mGender" column="GENDER"/>
		<result property="mPhone" column="PHONE"/>
		<result property="mEmail" column="EMAIL"/>
		<result property="mStatus" column="STATUS"/>
		<result property="mLevel" column="USER_LEVEL"/>
		<result property="mEnrollDate" column="ENROLL_DATE"/>
		<result property="mNickName" column="NICK_NAME"/>
	</resultMap>
	
	
	<select id="checkEmail" resultType="_int" parameterType="java.lang.String">
		
		SELECT COUNT(EMAIL)
		FROM MEMBER
		WHERE  EMAIL=#{mEmail}
	
	</select>
	
	<select id="checkNick" resultType="_int" parameterType="java.lang.String">
		
		SELECT COUNT(NICK_NAME)
		FROM MEMBER
		WHERE  NICK_NAME=#{mNickName}
	
	</select>
	
	<insert id="insertMember" parameterType="Member">
	
		INSERT INTO MEMBER VALUES(SEQ_MNO.NEXTVAL,#{mId},#{mPwd},#{mBirth},#{mGender},#{mPhone},#{mEmail},'Y','0',SYSDATE,#{mName},#{mNickName})

	</insert>
	
	<select id="checkId" resultType="_int" parameterType="java.lang.String">
	
		SELECT COUNT(USER_ID)
		FROM MEMBER
		WHERE USER_ID=#{mId}
	
		
	</select>
	
	<select id="checkPwd" resultType="java.lang.String" parameterType="java.lang.String">
	
		SELECT USER_PWD
		FROM MEMBER
		WHERE USER_ID=#{mId}
	
	</select>
	
	<select id="sessionMember" resultType="Member" parameterType="java.lang.String">
	
			SELECT*FROM MEMBER WHERE USER_ID=#{mId} AND STATUS='Y'
		
	</select>
	
	
	<update id="changePwd" parameterType="Member">
	
			UPDATE MEMBER
			SET USER_PWD=#{mPwd}
			WHERE USER_ID=#{mId}
	
	
	</update>
	
	
	</mapper>
	